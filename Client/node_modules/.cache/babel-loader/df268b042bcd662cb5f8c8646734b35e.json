{"ast":null,"code":"import _slicedToArray from \"/Users/ivanleo/Documents/coding/Client/keepsake/tailwindKeepsake/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/ivanleo/Documents/coding/Client/keepsake/tailwindKeepsake/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/ivanleo/Documents/coding/Client/keepsake/tailwindKeepsake/src/components/Canvas.js\";\nimport React, { useState, useRef, useReducer } from 'react';\nimport { Stage, Layer } from 'react-konva';\nimport Image from './Img'; //Image Imports\n\nimport groot from \"../assets/groot.svg\";\nimport goodVibes from \"../assets/goodVibes.svg\";\nimport cuteCat from \"../assets/cuteCat.svg\";\nimport bears from '../assets/barebears.png';\nimport alien from '../assets/alien.png';\nimport smiley from '../assets/smiley.png';\nimport TextField from './TextField';\n\nvar uuidv1 = require('uuid/v1');\n\nvar ADD_IMAGE = 'ADD_IMAGE';\nvar UPDATE_IMAGE = 'UPDATE_IMAGE';\nvar REMOVE_ITEM = 'REMOVE_ITEM';\nvar ADD_TEXT = 'ADD_TEXT';\nvar UPDATE_TEXT = 'UPDATE_TEXT';\nvar UPDATE_TEXT_CONTENT = 'UPDATE_TEXT_CONTENT';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ADD_IMAGE:\n      {\n        var _action$payload = action.payload,\n            image = _action$payload.image,\n            id = _action$payload.id,\n            width = _action$payload.width,\n            height = _action$payload.height,\n            x = _action$payload.x,\n            y = _action$payload.y;\n        return state.concat({\n          type: 'IMAGE',\n          image: image,\n          id: id,\n          width: width,\n          height: height,\n          x: x,\n          y: y\n        });\n      }\n\n    case UPDATE_IMAGE:\n      {\n        var _action$payload2 = action.payload,\n            _x = _action$payload2.x,\n            _y = _action$payload2.y,\n            _width = _action$payload2.width,\n            _height = _action$payload2.height,\n            _id = _action$payload2.id;\n        return state.map(function (item) {\n          return item.id === _id ? _objectSpread({}, item, {\n            x: _x,\n            y: _y,\n            width: _width,\n            height: _height\n          }) : _objectSpread({}, item);\n        });\n      }\n\n    case ADD_TEXT:\n      {\n        var _id2 = action.payload.id;\n        return state.concat({\n          type: 'TEXT',\n          id: _id2,\n          value: 'Click to edit text'\n        });\n      }\n\n    case UPDATE_TEXT_CONTENT:\n      {\n        var _action$payload3 = action.payload,\n            _id3 = _action$payload3.id,\n            content = _action$payload3.content;\n        return state.map(function (item) {\n          return item.id === _id3 ? _objectSpread({}, item, {\n            value: content\n          }) : _objectSpread({}, item);\n        });\n      }\n\n    case UPDATE_TEXT:\n      {\n        var _action$payload4 = action.payload,\n            _x2 = _action$payload4.x,\n            _y2 = _action$payload4.y,\n            _width2 = _action$payload4.width,\n            _height2 = _action$payload4.height,\n            _id4 = _action$payload4.id;\n        return state.map(function (item) {\n          return item.id === _id4 ? _objectSpread({}, item, {\n            x: _x2,\n            y: _y2,\n            width: _width2,\n            height: _height2\n          }) : _objectSpread({}, item);\n        });\n      }\n\n    case REMOVE_ITEM:\n      {\n        var _id5 = action.payload.id;\n        console.log(action);\n        console.log('Removing Item');\n        console.log(_id5);\n        return state.filter(function (item) {\n          return item.id !== _id5;\n        });\n      }\n\n    default:\n      return state;\n  }\n}\n\nfunction HomePage() {\n  // Combined Shapes\n  var _useReducer = useReducer(reducer, [{\n    \"type\": \"IMAGE\",\n    \"image\": \"/static/media/smiley.5ce9d575.png\",\n    \"id\": \"9467bef0-d592-11ea-800c-a3ad5dc180f8\",\n    \"width\": 502.7556869332876,\n    \"height\": 550.637180926934,\n    \"x\": 363.74012093938956,\n    \"y\": 363.74012093938984\n  }]),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      items = _useReducer2[0],\n      dispatch = _useReducer2[1]; // Currently Selected ELement\n\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedId = _useState2[0],\n      selectShape = _useState2[1];\n\n  console.log(items.filter(function (item) {\n    return item.id === selectedId;\n  })[0]);\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      updateState = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      editing = _React$useState4[0],\n      setEditing = _React$useState4[1];\n\n  var stageEl = React.createRef();\n  var layerEl = React.createRef();\n  var fileUploadEl = React.createRef();\n\n  var drawImage = function drawImage() {\n    fileUploadEl.current.click();\n  };\n\n  var forceUpdate = React.useCallback(function () {\n    return updateState({});\n  }, []);\n\n  var addImage = function addImage(image) {\n    var id = uuidv1();\n    dispatch({\n      type: 'ADD_IMAGE',\n      payload: {\n        image: image,\n        id: id,\n        width: 50,\n        height: 50,\n        x: 100,\n        y: 100\n      }\n    });\n    selectShape(id);\n  };\n\n  var fileChange = function fileChange(ev) {\n    var file = ev.target.files[0];\n    var reader = new FileReader();\n    reader.addEventListener('load', function () {\n      var id = uuidv1();\n      dispatch({\n        type: 'ADD_IMAGE',\n        payload: {\n          image: reader.result,\n          id: id\n        }\n      });\n      selectShape(id);\n      forceUpdate();\n    }, false);\n\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n  };\n\n  console.log(items);\n\n  var renderItems = function renderItems(item) {\n    switch (item.type) {\n      case 'IMAGE':\n        return React.createElement(Image, {\n          dispatch: dispatch,\n          key: item.id,\n          id: item.id,\n          width: item.width,\n          height: item.height,\n          imageUrl: item.image,\n          selectedId: selectedId,\n          x: item.x,\n          y: item.y,\n          onSelect: function onSelect() {\n            selectShape(item.id);\n          },\n          onChange: function onChange(newAttrs) {\n            console.log(newAttrs);\n            var x = newAttrs.x,\n                y = newAttrs.y,\n                width = newAttrs.width,\n                height = newAttrs.height;\n            dispatch({\n              type: UPDATE_IMAGE,\n              payload: {\n                x: x,\n                y: y,\n                width: width,\n                height: height,\n                id: item.id\n              }\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n\n      case 'TEXT':\n        return React.createElement(TextField, {\n          key: item.id,\n          item: item,\n          text: item.value,\n          selectedId: selectedId,\n          isSelected: item.id === selectedId,\n          onSelect: function onSelect() {\n            selectShape(item.id);\n          },\n          dispatch: dispatch,\n          onChange: function onChange(newAttrs) {\n            var x = newAttrs.x,\n                y = newAttrs.y,\n                width = newAttrs.width,\n                height = newAttrs.height;\n            dispatch({\n              type: UPDATE_TEXT,\n              payload: {\n                x: x,\n                y: y,\n                width: width,\n                height: height,\n                id: item.id\n              }\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        });\n\n      default:\n        return null;\n    }\n  };\n\n  return React.createElement(\"div\", {\n    style: {\n      maxWidth: \"1000px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"Whiteboard\"), React.createElement(\"div\", {\n    className: \"flex flex-row items-start justify-start\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: groot,\n    onClick: function onClick() {\n      return addImage(groot);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: goodVibes,\n    onClick: function onClick() {\n      return addImage(goodVibes);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: cuteCat,\n    onClick: function onClick() {\n      return addImage(cuteCat);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: alien,\n    onClick: function onClick() {\n      return addImage(alien);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: smiley,\n    onClick: function onClick() {\n      return addImage(smiley);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: {\n      width: \"80px\",\n      height: \"80px\"\n    },\n    className: \"max-w-xs\",\n    src: bears,\n    onClick: function onClick() {\n      return addImage(bears);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: function onClick() {\n      return drawImage();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, \"Upload Image\"), React.createElement(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ADD_TEXT,\n        payload: {\n          id: uuidv1()\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, \"Add Text\"), React.createElement(\"div\", {\n    className: \"bg-red-400 py-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, selectedId ? React.createElement(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: REMOVE_ITEM,\n        payload: {\n          id: selectedId\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, \"Delete Item\") : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    type: \"file\",\n    ref: fileUploadEl,\n    onChange: fileChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }), React.createElement(Stage, {\n    width: 1000,\n    height: 1000,\n    ref: stageEl,\n    className: \"border\",\n    onMouseDown: function onMouseDown(e) {\n      // deselect when clicked on empty area\n      var clickedOnEmpty = e.target === e.target.getStage();\n\n      if (clickedOnEmpty) {\n        selectShape(null);\n      }\n    },\n    onKeyPress: function onKeyPress(e) {\n      console.log(e.key);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(Layer, {\n    className: \"border\",\n    ref: layerEl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, items.map(function (item) {\n    return renderItems(item);\n  }))));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/ivanleo/Documents/coding/Client/keepsake/tailwindKeepsake/src/components/Canvas.js"],"names":["React","useState","useRef","useReducer","Stage","Layer","Image","bears","alien","smiley","TextField","uuidv1","require","ADD_IMAGE","UPDATE_IMAGE","REMOVE_ITEM","ADD_TEXT","UPDATE_TEXT","UPDATE_TEXT_CONTENT","reducer","state","action","type","payload","image","id","width","height","x","y","concat","map","item","value","content","console","log","filter","HomePage","items","dispatch","selectedId","selectShape","updateState","editing","setEditing","stageEl","createRef","layerEl","fileUploadEl","drawImage","current","click","forceUpdate","useCallback","addImage","fileChange","ev","file","target","files","reader","FileReader","addEventListener","result","readAsDataURL","renderItems","newAttrs","maxWidth","groot","goodVibes","cuteCat","display","e","clickedOnEmpty","getStage","key"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useReducer } from 'react'\nimport { Stage, Layer } from 'react-konva'\nimport Image from './Img'\n\n//Image Imports\nimport groot from '../assets/groot.svg'\nimport goodVibes from '../assets/goodVibes.svg'\nimport cuteCat from '../assets/cuteCat.svg'\nimport bears from '../assets/barebears.png'\nimport alien from '../assets/alien.png'\nimport smiley from '../assets/smiley.png'\n\nimport TextField from './TextField'\n\nconst uuidv1 = require('uuid/v1')\n\nconst ADD_IMAGE = 'ADD_IMAGE'\nconst UPDATE_IMAGE = 'UPDATE_IMAGE'\nconst REMOVE_ITEM = 'REMOVE_ITEM'\nconst ADD_TEXT = 'ADD_TEXT'\nconst UPDATE_TEXT = 'UPDATE_TEXT'\nconst UPDATE_TEXT_CONTENT = 'UPDATE_TEXT_CONTENT'\n\nfunction reducer (state, action) {\n  switch (action.type) {\n    case ADD_IMAGE: {\n      const { image, id,width,height,x,y } = action.payload\n      return state.concat({ type: 'IMAGE', image, id , width,height ,x,y})\n    }\n\n    case UPDATE_IMAGE: {\n      const { x, y, width, height, id } = action.payload\n      return state.map(item => item.id === id ? { ...item, x: x, y: y, width: width, height: height } : { ...item })\n    }\n\n    case ADD_TEXT: {\n      const { id } = action.payload\n      return state.concat({ type: 'TEXT', id, value: 'Click to edit text' })\n    }\n\n    case UPDATE_TEXT_CONTENT: {\n      const { id, content } = action.payload\n      return state.map(item => item.id === id ? { ...item, value: content } : { ...item })\n    }\n\n    case UPDATE_TEXT: {\n      const { x, y, width, height, id } = action.payload\n      return state.map(item => item.id === id ? { ...item, x: x, y: y, width: width, height: height } : { ...item })\n    }\n\n    case REMOVE_ITEM: {\n      const { id } = action.payload\n      console.log(action)\n      console.log('Removing Item')\n      console.log(id)\n      return state.filter(item => item.id !== id)\n    }\n\n    default:\n      return state\n  }\n}\n\nfunction HomePage () {\n  // Combined Shapes\n  const [items, dispatch] = useReducer(reducer, [\n    {\n      \"type\": \"IMAGE\",\n      \"image\": \"/static/media/smiley.5ce9d575.png\",\n      \"id\": \"9467bef0-d592-11ea-800c-a3ad5dc180f8\",\n      \"width\": 502.7556869332876,\n      \"height\": 550.637180926934,\n      \"x\": 363.74012093938956,\n      \"y\": 363.74012093938984\n    }\n  ])\n\n  // Currently Selected ELement\n  const [selectedId, selectShape] = useState(null)\n  console.log(items.filter(item => item.id===selectedId)[0])\n  const [, updateState] = React.useState()\n  const [editing,setEditing] = React.useState(false)\n  const stageEl = React.createRef()\n  const layerEl = React.createRef()\n  const fileUploadEl = React.createRef()\n\n  const drawImage = () => {\n    fileUploadEl.current.click()\n  }\n\n  const forceUpdate = React.useCallback(() => updateState({}), [])\n\n  const addImage = (image) => {\n    const id = uuidv1()\n    dispatch({ type: 'ADD_IMAGE', payload: { image, id ,width:50,height:50,x:100,y:100} })\n    selectShape(id)\n  }\n\n  const fileChange = ev => {\n    const file = ev.target.files[0]\n    const reader = new FileReader()\n    reader.addEventListener(\n      'load',\n      () => {\n        const id = uuidv1()\n        dispatch({ type: 'ADD_IMAGE', payload: { image: reader.result, id } })\n        selectShape(id)\n        forceUpdate()\n      },\n      false\n    )\n    if (file) {\n      reader.readAsDataURL(file)\n    }\n  }\n  console.log(items)\n  const renderItems = (item) => {\n    switch (item.type) {\n      case 'IMAGE':\n        return (\n          <Image\n            dispatch={dispatch}\n            key={item.id}\n            id={item.id}\n            width={item.width}\n            height={item.height}\n            imageUrl={item.image}\n            selectedId={selectedId}\n            x={item.x}\n            y={item.y}\n            onSelect={() => {\n              selectShape(item.id)\n            }}\n            onChange={newAttrs => {\n              console.log(newAttrs)\n              const { x, y, width, height } = newAttrs\n\n              dispatch({\n                type: UPDATE_IMAGE,\n                payload: {\n                  x,\n                  y,\n                  width,\n                  height,\n                  id: item.id\n                }\n              })\n            }}\n          />\n        )\n      case 'TEXT':\n        return (\n          <TextField\n            key={item.id}\n            item={item}\n            text={item.value}\n            selectedId={selectedId}\n            isSelected={item.id === selectedId}\n            onSelect={() => {\n              selectShape(item.id)\n            }}\n            dispatch={dispatch}\n            onChange={newAttrs => {\n              const { x, y, width, height } = newAttrs\n              dispatch({\n                type: UPDATE_TEXT,\n                payload: {\n                  x,\n                  y,\n                  width,\n                  height,\n                  id: item.id\n                }\n              })\n            }}\n          />\n        )\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div style = {{maxWidth:\"1000px\"}}>\n      <h1>Whiteboard</h1>\n      <div className=\"flex flex-row items-start justify-start\">\n        <img  style={{width:\"80px\", height:\"80px\"}}className = \"max-w-xs\" src={groot} onClick={() => addImage(groot)} />\n        <img style={{ width: \"80px\", height:\"80px\" }} className=\"max-w-xs\" src={goodVibes} onClick={() => addImage(goodVibes)} /> \n        <img style={{ width: \"80px\", height: \"80px\" }} className=\"max-w-xs\" src={cuteCat} onClick={() => addImage(cuteCat)} /> \n        <img style={{ width: \"80px\", height: \"80px\" }} className=\"max-w-xs\" src={alien} onClick={() => addImage(alien)} /> \n        <img style={{ width: \"80px\", height: \"80px\" }} className=\"max-w-xs\" src={smiley} onClick={() => addImage(smiley)} /> \n        <img style={{ width: \"80px\", height: \"80px\" }} className=\"max-w-xs\" src={bears} onClick={() => addImage(bears)} /> \n      </div>\n      \n      <button onClick={() => drawImage()}>Upload Image</button>\n      \n      <button onClick={() => dispatch({ type: ADD_TEXT, payload: { id: uuidv1() } })}>Add Text</button>\n      <div className = \"bg-red-400 py-6\">\n      {selectedId ? <button onClick={()=>dispatch({ type: REMOVE_ITEM, payload: { id: selectedId } })}>Delete Item</button> : <div></div>}\n      </div>\n      \n      <input\n        style={{ display: 'none' }}\n        type='file'\n        ref={fileUploadEl}\n        onChange={fileChange}\n      />\n      <Stage\n        width={1000}\n        height={1000}\n        ref={stageEl}\n        className = \"border\"\n        onMouseDown={e => {\n          // deselect when clicked on empty area\n          const clickedOnEmpty = e.target === e.target.getStage()\n          if (clickedOnEmpty) {\n            selectShape(null)\n          }\n        }}\n        onKeyPress={(e) => {\n          console.log(e.key)\n        }}\n      >\n        <Layer  className = \"border\" ref={layerEl}>\n          {items.map(item => renderItems(item))}\n\n        </Layer>\n      </Stage>\n    </div>\n  )\n}\nexport default HomePage\n"]},"metadata":{},"sourceType":"module"}